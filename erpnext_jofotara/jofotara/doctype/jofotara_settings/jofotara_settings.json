{
  "name": "JoFotara Settings",
  "module": "jofotara",
  "doctype": "DocType",
  "custom": 0,
  "istable": 0,
  "editable_grid": 0,
  "read_only": 0,
  "track_changes": 1,
  "is_submittable": 0,
  "issingle": 1,
  "allow_rename": 0,

  "field_order": [
    "use_oauth2",
    "send_on_submit",
    "activity_number",
    "client_id",
    "secret_key",
    "device_user",
    "device_secret",
    "base_url",
    "token_url",
    "submit_url",
    "cancel_url",
    "query_url",
    "payload_format",
    "invoice_template",
    "seller_tax_number",
    "sandbox_mode",
    "auto_send_on_submit",
    "last_response"
  ],

  "fields": [
    { "label": "Enable OAuth2", "fieldname": "use_oauth2", "fieldtype": "Check", "default": "1" },
    { "label": "Send on Submit", "fieldname": "send_on_submit", "fieldtype": "Check", "default": "1" },

    { "label": "Activity Number", "fieldname": "activity_number", "fieldtype": "Data", "reqd": 1 },

    { "label": "Client ID", "fieldname": "client_id", "fieldtype": "Data", "depends_on": "eval:doc.use_oauth2==1" },
    { "label": "Client Secret", "fieldname": "secret_key", "fieldtype": "Password", "depends_on": "eval:doc.use_oauth2==1" },

    { "label": "Device User (Alt Auth)", "fieldname": "device_user", "fieldtype": "Data", "depends_on": "eval:doc.use_oauth2!=1" },
    { "label": "Device Secret (Alt Auth)", "fieldname": "device_secret", "fieldtype": "Password", "depends_on": "eval:doc.use_oauth2!=1" },

    { "label": "Base URL", "fieldname": "base_url", "fieldtype": "Data", "options": "URL", "default": "https://backend.jofotara.gov.jo" },
    { "label": "Token URL", "fieldname": "token_url", "fieldtype": "Data", "default": "/connect/token" },
    { "label": "Submit URL", "fieldname": "submit_url", "fieldtype": "Data", "default": "/core/invoices/" },
    { "label": "Cancel URL", "fieldname": "cancel_url", "fieldtype": "Data", "default": "/core/invoices/cancel" },
    { "label": "Query URL", "fieldname": "query_url", "fieldtype": "Data", "default": "/core/invoices/status" },

    {
      "label": "Payload Format",
      "fieldname": "payload_format",
      "fieldtype": "Select",
      "options": "XML_UBL_2_1\nJSON",
      "default": "XML_UBL_2_1"
    },

    {
      "label": "Invoice Template",
      "fieldname": "invoice_template",
      "fieldtype": "Select",
      "options": "income\nsales",
      "default": "sales",
      "description": "اختر نوع القالب المسموح من JoFotara للحساب الحالي."
    },
    {
      "label": "Seller Tax Number (Fallback)",
      "fieldname": "seller_tax_number",
      "fieldtype": "Data",
      "description": "اختياري: رقم ضريبة البائع كبديل لو لم يجده من Company/الفاتورة."
    },

    { "label": "Sandbox Mode", "fieldname": "sandbox_mode", "fieldtype": "Check", "default": "0" },

    {
      "label": "Auto Send on Submit (Legacy)",
      "fieldname": "auto_send_on_submit",
      "fieldtype": "Check",
      "default": "0",
      "hidden": 1,
      "read_only": 1,
      "description": "حقل متوافق خلفيًا إذا كان الكود يتحقق من هذا الاسم."
    },

    {
      "label": "Last Response",
      "fieldname": "last_response",
      "fieldtype": "Long Text",
      "read_only": 1,
      "allow_on_submit": 1
    }
  ],

  "permissions": [
    { "role": "System Manager", "read": 1, "write": 1, "create": 1, "delete": 1, "print": 1, "email": 1, "export": 1 }
  ]
}
